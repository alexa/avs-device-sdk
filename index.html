<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AlexaClientSDK: What is the Alexa Voice Service (AVS)?</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="avs-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AlexaClientSDK
   &#160;<span id="projectnumber">1.12.0</span>
   </div>
   <div id="projectbrief">A cross-platform, modular SDK for interacting with the Alexa Voice Service</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">What is the Alexa Voice Service (AVS)? </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Alexa Voice Service (AVS) enables developers to integrate Alexa directly into their products, bringing the convenience of voice control to any connected device. AVS provides developers with access to a suite of resources to quickly and easily build Alexa-enabled products, including APIs, hardware development kits, software development kits, and documentation.</p>
<p><a href="https://developer.amazon.com/alexa-voice-service">Learn more Â»</a></p>
<h3>Overview of the AVS Device SDK</h3>
<p>The AVS Device SDK provides C++-based (11 or later) libraries that leverage the AVS API to create device software for Alexa-enabled products. It is modular and abstracted, providing components for handling discrete functions such as speech capture, audio processing, and communications, with each component exposing the APIs that you can use and customize for your integration. It also includes a sample app, which demonstrates the interactions with AVS.</p>
<h3>Get Started</h3>
<p>You can set up the SDK on the following platforms:</p><ul>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/Ubuntu-Linux-Quick-Start-Guide">Ubuntu Linux</a></li>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/Raspberry-Pi-Quick-Start-Guide-with-Script">Raspberry Pi</a> (Raspbian Stretch)</li>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/macOS-Quick-Start-Guide">macOS</a></li>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/Windows-Quick-Start-Guide-with-Script">Windows 64-bit</a></li>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/Linux-Reference-Guide">Generic Linux</a></li>
<li><a href="https://github.com/alexa/avs-device-sdk/wiki/Android-Quick-Start-Guide">Android</a></li>
</ul>
<p>You can also prototype with a third party development kit:</p><ul>
<li><a href="https://github.com/xmos/vocalfusion-avs-setup">XMOS VocalFusion 4-Mic Kit</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/xmos-vocal-fusion">Here</a></li>
<li><a href="https://www.nxp.com/docs/en/user-guide/Quick-Start-Guide-for-Arrow-AVS-kit.pdf">Synaptics AudioSmart 2-Mic Dev Kit for Amazon AVS with NXP SoC</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/synaptics-2-mic">Here</a></li>
<li><a href="https://avs-dvk-workshop.github.io">Intel Speech Enabling Developer Kit</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/intel-speech-enabling/">Here</a></li>
<li><a href="http://openlinux2.amlogic.com/download/doc/A113X1_Usermanual.pdf">Amlogic A113X1 Far-Field Dev Kit for Amazon AVS</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/amlogic-6-mic">Here</a></li>
<li><a href="http://www.banana-pi.org/images/r18avs/AVS-quickstartguide.pdf">Allwinner SoC-Only 3-Mic Far-Field Dev Kit for Amazon AVS</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/allwinner-3-mic">Here</a></li>
<li><a href="https://www.dspg.com/dspg-hdclear-3-mic-development-kit-for-amazon-avs/#documentation">DSPG HDClear 3-Mic Development Kit for Amazon AVS</a> - Learn More <a href="https://developer.amazon.com/alexa-voice-service/dev-kits/dspg-3-mic">Here</a></li>
</ul>
<p>Or if you prefer, you can start with our <a href="https://alexa.github.io/avs-device-sdk/">SDK API Documentation</a>.</p>
<h3>Learn More About The AVS Device SDK</h3>
<p><a href="https://youtu.be/F5DixCPJYo8">Watch this tutorial</a> to learn about the how this SDK works and the set up process.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/F5DixCPJYo8" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
<h3>SDK Architecture</h3>
<p>This diagram illustrates the data flows between components that comprise the AVS Device SDK for C++.</p>
<div class="image">
<img src="https://m.media-amazon.com/images/G/01/mobile-apps/dex/avs/Alexa_Device_SDK_Architecture.png" alt="SDK Architecture Diagram"/ width="75%">
</div>
<p><b>Audio Signal Processor (ASP)</b> - Third-party software that applies signal processing algorithms to both input and output audio channels. The applied algorithms are designed to produce clean audio data and include, but are not limited to acoustic echo cancellation (AEC), beam forming (fixed or adaptive), voice activity detection (VAD), and dynamic range compression (DRC). If a multi-microphone array is present, the ASP constructs and outputs a single audio stream for the array.</p>
<p><b>Shared Data Stream (SDS)</b> - A single producer, multi-consumer buffer that allows for the transport of any type of data between a single writer and one or more readers. SDS performs two key tasks:</p>
<ol type="1">
<li>It passes audio data between the audio front end (or Audio Signal Processor), the wake word engine, and the Alexa Communications Library (ACL) before sending to AVS</li>
<li>It passes data attachments sent by AVS to specific capability agents via the ACL</li>
</ol>
<p>SDS is implemented atop a ring buffer on a product-specific memory segment (or user-specified), which allows it to be used for in-process or interprocess communication. Keep in mind, the writer and reader(s) may be in different threads or processes.</p>
<p><b>Wake Word Engine (WWE)</b> - Software that spots wake words in an input stream. It is comprised of two binary interfaces. The first handles wake word spotting (or detection), and the second handles specific wake word models (in this case "Alexa"). Depending on your implementation, the WWE may run on the system on a chip (SOC) or dedicated chip, like a digital signal processor (DSP).</p>
<p><b>Audio Input Processor (AIP)</b> - Handles audio input that is sent to AVS via the ACL. These include on-device microphones, remote microphones, an other audio input sources.</p>
<p>The AIP also includes the logic to switch between different audio input sources. Only one audio input source can be sent to AVS at a given time.</p>
<p><b>Alexa Communications Library (ACL)</b> - Serves as the main communications channel between a client and AVS. The ACL performs two key functions:</p>
<ol type="1">
<li>Establishes and maintains long-lived persistent connections with AVS. ACL adheres to the messaging specification detailed in <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/docs/managing-an-http-2-connection">Managing an HTTP/2 Connection with AVS</a>.</li>
<li>Provides message sending and receiving capabilities, which includes support JSON-formatted text, and binary audio content. For additional information, see <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/docs/avs-http2-requests">Structuring an HTTP/2 Request to AVS</a>.</li>
</ol>
<p><b>Alexa Directive Sequencer Library (ADSL)</b>: Manages the order and sequence of directives from AVS, as detailed in the <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/interaction-model#channels">AVS Interaction Model</a>. This component manages the lifecycle of each directive, and informs the Directive Handler (which may or may not be a Capability Agent) to handle the message.</p>
<p><b>Activity Focus Manager Library (AFML)</b>: Provides centralized management of audiovisual focus for the device. Focus is based on channels, as detailed in the <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/interaction-model#channels">AVS Interaction Model</a>, which are used to govern the prioritization of audiovisual inputs and outputs.</p>
<p>Channels can either be in the foreground or background. At any given time, only one channel can be in the foreground and have focus. If multiple channels are active, you need to respect the following priority order: Dialog &gt; Alerts &gt; Content. When a channel that is in the foreground becomes inactive, the next active channel in the priority order moves into the foreground.</p>
<p>Focus management is not specific to Capability Agents or Directive Handlers, and can be used by non-Alexa related agents as well. This allows all agents using the AFML to have a consistent focus across a device.</p>
<p><b>Capability Agents</b>: Handle Alexa-driven interactions; specifically directives and events. Each capability agent corresponds to a specific interface exposed by the AVS API. These interfaces include:</p>
<ul>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/alerts">Alerts</a> - The interface for setting, stopping, and deleting timers and alarms.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/audioplayer">AudioPlayer</a> - The interface for managing and controlling audio playback.</li>
<li><a href="https://developer.amazon.com/docs/alexa-voice-service/bluetooth.html">Bluetooth</a> - The interface for managing Bluetooth connections between peer devices and Alexa-enabled products.</li>
<li><a href="https://developer.amazon.com/docs/alexa-voice-service/">DoNotDisturb</a> - The interface for enabling the do not disturb feature.</li>
<li><a href="https://developer.amazon.com/docs/alexa-voice-service/equalizercontroller.html">EqualizerController</a> - The interface for adjusting equalizer settings, such as decibel (dB) levels and modes.</li>
<li><a href="https://developer.amazon.com/docs/alexa-voice-service/interactionmodel-interface.html">InteractionModel</a> - This interface allows a client to support complex interactions initiated by Alexa, such as Alexa Routines.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/notifications">Notifications</a> - The interface for displaying notifications indicators.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/playbackcontroller">PlaybackController</a> - The interface for navigating a playback queue via GUI or buttons.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/speaker">Speaker</a> - The interface for volume control, including mute and unmute.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/speechrecognizer">SpeechRecognizer</a> - The interface for speech capture.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/speechsynthesizer">SpeechSynthesizer</a> - The interface for Alexa speech output.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/system">System</a> - The interface for communicating product status/state to AVS.</li>
<li><a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/reference/templateruntime">TemplateRuntime</a> - The interface for rendering visual metadata.</li>
</ul>
<h3>Security Best Practices</h3>
<p>In addition to adopting the <a href="https://developer.amazon.com/docs/alexa-voice-service/security-best-practices.html">Security Best Practices for Alexa</a>, when building the SDK:</p>
<ul>
<li>Protect configuration parameters, such as those found in the AlexaClientSDKCOnfig.json file, from tampering and inspection.</li>
<li>Protect executable files and processes from tampering and inspection.</li>
<li>Protect storage of the SDK's persistent states from tampering and inspection.</li>
<li>Your C++ implementation of AVS Device SDK interfaces must not retain locks, crash, hang, or throw exceptions.</li>
<li>Use exploit mitigation flags and memory randomization techniques when you compile your source code, in order to prevent vulnerabilities from exploiting buffer overflows and memory corruptions.</li>
</ul>
<h3>Important Considerations</h3>
<ul>
<li>Review the AVS <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/support/terms-and-agreements">Terms &amp; Agreements</a>.</li>
<li>The earcons associated with the sample project are for <b>prototyping purposes</b> only. For implementation and design guidance for commercial products, please see <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/content/designing-for-the-alexa-voice-service">Designing for AVS</a> and <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/content/alexa-voice-service-ux-design-guidelines">AVS UX Guidelines</a>.</li>
<li>Please use the contact information below to-<ul>
<li><a href="http://www.sensory.com/support/contact/us-sales/">Contact Sensory</a> for information on TrulyHandsFree licensing.</li>
<li><a href="#" onclick="location.href='mai'+'lto:'+'sno'+'wb'+'oy@'+'ki'+'tt.'+'ai'; return false;">Contact KITT.AI</a> for information on SnowBoy licensing.</li>
</ul>
</li>
<li><b>IMPORTANT</b>: The Sensory wake word engine referenced in this document is time-limited: code linked against it will stop working when the library expires. The library included in this repository will, at all times, have an expiration date that is at least 120 days in the future. See <a href="https://github.com/Sensory/alexa-rpi#license">Sensory's GitHub</a>page for more information.</li>
</ul>
<h3>Release Notes and Known Issues</h3>
<p><b>Note</b>: Feature enhancements, updates, and resolved issues from previous releases are available to view in https://github.com/alexa/alexa-client-sdk/blob/master/CHANGELOG.md "CHANGELOG.md".</p>
<h3>v1.12.0 released 02/25/2019:</h3>
<p><b>Enhancements</b></p>
<ul>
<li>Support was added for the <code>fr_CA</code> locale.</li>
<li>The Executor has been optimized to run a single thread when there are active job in the queue, and to remain idle when there are not active jobs.</li>
<li>An additional parameter of <code>alertType</code> has been added to the Alerts capability agent. This will allow observers of alerts to know the type of alert being delivered.</li>
<li>Support for programmatic unload and load of PulseAudio Bluetooth modules was added. To enable this feature, there is a <a href="https://github.com/alexa/avs-device-sdk/wiki/CMake-parameters#bluetooth">new CMake option</a>: <code>BLUETOOTH_BLUEZ_PULSEAUDIO_OVERRIDE_ENDPOINTS</code>. Note that <a href="https://github.com/alexa/avs-device-sdk/wiki/Dependencies#bluetooth">libpulse-dev is a required dependency</a> of this feature.</li>
<li>An observer interface was added for when an active Bluetooth device connects and disconnects.</li>
<li>The <code>BluetoothDeviceManagerInterface</code> instantiation was moved from <code>DefaultClient</code> to <code>SampleApp</code> to allow applications to override it.</li>
<li>The <code>MediaPlayerInterface</code> now supports repeating playback of URL sources.</li>
<li>The Kitt.AI wake word engine (WWE) is now compatible with GCC5+.</li>
<li>Stop of ongoing alerts, management of MessageObservers, and management of CallStateObservers have been exposed through DefaultClient.</li>
</ul>
<p><b>Bug Fixes</b></p>
<ul>
<li><a href="https://github.com/alexa/avs-device-sdk/issues/953">Issue 953</a> - The <code>MediaPlayerInterface</code> requirement that callbacks not be made upon a callers thread has been removed.</li>
<li><a href="https://github.com/alexa/avs-device-sdk/issues/1136">Issue 1136</a> - Added a missing default virtual destructor.</li>
<li><a href="https://github.com/alexa/avs-device-sdk/issues/1140">Issue 1140</a> - Fixed an issue where DND states were not synchronized to the AVS cloud after device reset.</li>
<li><a href="https://github.com/alexa/avs-device-sdk/issues/1143">Issue 1143</a> - Fixed an issue in which the SpeechSynthesizer couldn't enter a sleeping state.</li>
<li><a href="https://github.com/alexa/avs-device-sdk/issues/1183">Issue 1183</a> - Fixed an issue where alarm is not sounding for certain timezones</li>
<li>Changing an alert's volume from the Alexa app now works when an alert is playing.</li>
<li>Added missing shutdown handling for ContentDecrypter to prevent the <code>Stop</code> command from triggering a crash when SAMPLE-AES encrypted content was streaming.</li>
<li>Fixed a bug where if the Notifications database is empty, due to a crash or corruption, the SDK initialization process enters an infinite loop when it retries to get context from the Notifications capability agent.</li>
<li>Fixed a race condition that caused <code>AlertsRenderer</code> observers to miss notification that an alert has been completed.</li>
</ul>
<p><b>Known Issues</b></p>
<ul>
<li><code>PlaylistParser</code> and <code>IterativePlaylistParser</code> generate two HTTP requests (one to fetch the content type, and one to fetch the audio data) for each audio stream played.</li>
<li>Music playback history isn't being displayed in the Alexa app for certain account and device types.</li>
<li>On GCC 8+, issues related to <code>-Wclass-memaccess</code> will trigger warnings. However, this won't cause the build to fail and these warnings can be ignored.</li>
<li>Android error ("libDefaultClient.so" not found) can be resolved by upgrading to ADB version 1.0.40</li>
<li>When network connection is lost, lost connection status is not returned via local TTS.</li>
<li><code>ACL</code> may encounter issues if audio attachments are received but not consumed.</li>
<li><code>SpeechSynthesizerState</code> currently uses <code>GAINING_FOCUS</code> and <code>LOSING_FOCUS</code> as a workaround for handling intermediate state. These states may be removed in a future release.</li>
<li>The Alexa app doesn't always indicate when a device is successfully connected via Bluetooth.</li>
<li>Connecting a product to streaming media via Bluetooth will sometimes stop media playback within the source application. Resuming playback through the source application or toggling next/previous will correct playback.</li>
<li>When a source device is streaming silence via Bluetooth, the Alexa app indicates that audio content is streaming.</li>
<li>The Bluetooth agent assumes that the Bluetooth adapter is always connected to a power source. Disconnecting from a power source during operation is not yet supported.</li>
<li>On some products, interrupted Bluetooth playback may not resume if other content is locally streamed.</li>
<li><code>make integration</code> is currently not available for Android. In order to run integration tests on Android, you'll need to manually upload the test binary file along with any input file. At that point, the adb can be used to run the integration tests.</li>
<li>On Raspberry Pi running Android Things with HDMI output audio, beginning of speech is truncated when Alexa responds to user text-to-speech (TTS).</li>
<li>When the sample app is restarted and network connection is lost, Reminder TTS does not play. Instead, the default alarm tone will play twice. </li>
</ul>
</div></div><!-- contents -->
<html>
  <body>
    <p style="text-align:left;">
      AlexaClientSDK 1.12.0 - Copyright 2016-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      <span style="float:right;">
	Licensed under the <a HREF=http://aws.amazon.com/apache2.0/>Apache License, Version 2.0</a>
      </span>
    </p>
  </body>
</html>
