<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AlexaClientSDK: alexaClientSDK::acsdkAssets::manager::StorageManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="avs-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AlexaClientSDK
   &#160;<span id="projectnumber">1.26.0</span>
   </div>
   <div id="projectbrief">A cross-platform, modular SDK for interacting with the Alexa Voice Service</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacealexa_client_s_d_k.html">alexaClientSDK</a></li><li class="navelem"><a class="el" href="namespacealexa_client_s_d_k_1_1acsdk_assets.html">acsdkAssets</a></li><li class="navelem"><a class="el" href="namespacealexa_client_s_d_k_1_1acsdk_assets_1_1manager.html">manager</a></li><li class="navelem"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html">StorageManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">alexaClientSDK::acsdkAssets::manager::StorageManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_storage_manager_8h_source.html">StorageManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for alexaClientSDK::acsdkAssets::manager::StorageManager:</div>
<div class="dyncontent">
<div class="center"><img src="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager__inherit__graph.png" border="0" usemap="#alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_inherit__map" id="alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for alexaClientSDK::acsdkAssets::manager::StorageManager:</div>
<div class="dyncontent">
<div class="center"><img src="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager__coll__graph.png" border="0" usemap="#alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_coll__map" alt="Collaboration graph"/></div>
<map name="alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_coll__map" id="alexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_1_1_reservation_token.html">ReservationToken</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a67a190af8f521dc6f51b3a74304d3e4a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a67a190af8f521dc6f51b3a74304d3e4a">~StorageManager</a> ()=default</td></tr>
<tr class="separator:a67a190af8f521dc6f51b3a74304d3e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41a4956602086a56bf98a988c5324cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#ac41a4956602086a56bf98a988c5324cc">purgeUnreferenced</a> ()</td></tr>
<tr class="separator:ac41a4956602086a56bf98a988c5324cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18709340c286cf9e7c4e2d9a08897c78"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a18709340c286cf9e7c4e2d9a08897c78">registerAndAcquireResource</a> (std::unique_ptr&lt; <a class="el" href="structalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_1_1_reservation_token.html">StorageManager::ReservationToken</a> &gt; reservationToken, const std::string &amp;id, const std::string &amp;sourcePath)</td></tr>
<tr class="separator:a18709340c286cf9e7c4e2d9a08897c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13683ac9e675f69f4e9d643fe260b72e"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a13683ac9e675f69f4e9d643fe260b72e">acquireResource</a> (const std::string &amp;id)</td></tr>
<tr class="separator:a13683ac9e675f69f4e9d643fe260b72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f10beec4fe9b627518ebaf865e89108"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a4f10beec4fe9b627518ebaf865e89108">releaseResource</a> (const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt; &amp;resource)</td></tr>
<tr class="separator:a4f10beec4fe9b627518ebaf865e89108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa746012ce1f21c7bddcb6fcf76c5592c"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="structalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_1_1_reservation_token.html">ReservationToken</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#aa746012ce1f21c7bddcb6fcf76c5592c">reserveSpace</a> (size_t requestedAmount)</td></tr>
<tr class="separator:aa746012ce1f21c7bddcb6fcf76c5592c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8daa166802bb6fac4907bf94f5cac56"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#ad8daa166802bb6fac4907bf94f5cac56">availableBudget</a> ()</td></tr>
<tr class="separator:ad8daa166802bb6fac4907bf94f5cac56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c4f9224464b36a3e5676ab26aff655"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#af8c4f9224464b36a3e5676ab26aff655">getBudget</a> ()</td></tr>
<tr class="separator:af8c4f9224464b36a3e5676ab26aff655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8422c317c64831548152bb5ba00ead7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#ae8422c317c64831548152bb5ba00ead7">setBudget</a> (size_t valueMB)</td></tr>
<tr class="separator:ae8422c317c64831548152bb5ba00ead7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a01c091c6fa22b164f4d4595e98148dd7"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html">StorageManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a01c091c6fa22b164f4d4595e98148dd7">create</a> (const std::string &amp;workingDirectory, const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_asset_manager.html">AssetManager</a> &gt; &amp;assetManager)</td></tr>
<tr class="separator:a01c091c6fa22b164f4d4595e98148dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a257f69bde4873eccf553ef68ff1ac3b8"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a257f69bde4873eccf553ef68ff1ac3b8">MAX_BUDGET_MB</a> = 500</td></tr>
<tr class="separator:a257f69bde4873eccf553ef68ff1ac3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:acac13fbacd13cbd5152e5cf40f1da8ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#acac13fbacd13cbd5152e5cf40f1da8ff">StorageManager</a> (const std::string &amp;workingDirectory, const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_asset_manager.html">AssetManager</a> &gt; &amp;assetManager, size_t budget)</td></tr>
<tr class="separator:acac13fbacd13cbd5152e5cf40f1da8ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3dd9f35fe4aaad270117feac8c3a06a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#aa3dd9f35fe4aaad270117feac8c3a06a">init</a> ()</td></tr>
<tr class="separator:aa3dd9f35fe4aaad270117feac8c3a06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c77f82f3126a9fa2d0bb7c54628a0cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a4c77f82f3126a9fa2d0bb7c54628a0cd">requestGarbageCollection</a> (size_t requestedAmount)</td></tr>
<tr class="separator:a4c77f82f3126a9fa2d0bb7c54628a0cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60880e88bf9bc5699cff743925df1f35"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a60880e88bf9bc5699cff743925df1f35">requestSpace</a> (size_t requestedAmount)</td></tr>
<tr class="separator:a60880e88bf9bc5699cff743925df1f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037f524083336262c5ca11e6a7f3d324"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html#a037f524083336262c5ca11e6a7f3d324">freeReservedSpace</a> (size_t size)</td></tr>
<tr class="separator:a037f524083336262c5ca11e6a7f3d324"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class manages a certain budget that Asset Manager should not go over. If at any point the amount of space used by Asset Manager goes over the budget, this class will trigger a call to the Asset Manager to free up space by deleting unused artifacts. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a67a190af8f521dc6f51b3a74304d3e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a190af8f521dc6f51b3a74304d3e4a">&#9670;&nbsp;</a></span>~StorageManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">alexaClientSDK::acsdkAssets::manager::StorageManager::~StorageManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acac13fbacd13cbd5152e5cf40f1da8ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac13fbacd13cbd5152e5cf40f1da8ff">&#9670;&nbsp;</a></span>StorageManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">alexaClientSDK::acsdkAssets::manager::StorageManager::StorageManager </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>workingDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_asset_manager.html">AssetManager</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>assetManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>budget</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a13683ac9e675f69f4e9d643fe260b72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13683ac9e675f69f4e9d643fe260b72e">&#9670;&nbsp;</a></span>acquireResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt; alexaClientSDK::acsdkAssets::manager::StorageManager::acquireResource </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given an id, attempt to acquire a resource which will increment its reference count and returns the resource accordingly. If no resource is found with this id, then return a nullptr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>REQUIRED, a unique identifier for the requested resource. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULLABLE, a smart pointer to an existing resource, null if not found. </dd></dl>

</div>
</div>
<a id="ad8daa166802bb6fac4907bf94f5cac56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8daa166802bb6fac4907bf94f5cac56">&#9670;&nbsp;</a></span>availableBudget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t alexaClientSDK::acsdkAssets::manager::StorageManager::availableBudget </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the amount of bytes remaining that can be used for a new artifact. This is calculated as the lowest of:<ol type="1">
<li>Asset Manager Budget - reserved space - downloaded resource space</li>
<li>Amount of space left on the device - 5MB buffer </li>
</ol>
</dd></dl>

</div>
</div>
<a id="a01c091c6fa22b164f4d4595e98148dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01c091c6fa22b164f4d4595e98148dd7">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager.html">StorageManager</a> &gt; alexaClientSDK::acsdkAssets::manager::StorageManager::create </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>workingDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_asset_manager.html">AssetManager</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>assetManager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a Storage Manager that is responsible for maintaining a budget for the artifacts to remain under.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workingDirectory</td><td>REQUIRED, place to store budget configuration. </td></tr>
    <tr><td class="paramname">assetManager</td><td>REQUIRED, used to request low priority artifacts cleanup to meet the budget. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULLABLE, a smart pointer to Storage Manager if successful, null otherwise. </dd></dl>

</div>
</div>
<a id="a037f524083336262c5ca11e6a7f3d324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037f524083336262c5ca11e6a7f3d324">&#9670;&nbsp;</a></span>freeReservedSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::manager::StorageManager::freeReservedSpace </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Free up reserved space, to be used by reservation tokens </p>

</div>
</div>
<a id="af8c4f9224464b36a3e5676ab26aff655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8c4f9224464b36a3e5676ab26aff655">&#9670;&nbsp;</a></span>getBudget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t alexaClientSDK::acsdkAssets::manager::StorageManager::getBudget </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Get the current budget in MB </dd></dl>

</div>
</div>
<a id="aa3dd9f35fe4aaad270117feac8c3a06a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3dd9f35fe4aaad270117feac8c3a06a">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool alexaClientSDK::acsdkAssets::manager::StorageManager::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Goes through the working directory and initializes all the available resources.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the initialization succeeded, false otherwise. </dd></dl>

</div>
</div>
<a id="ac41a4956602086a56bf98a988c5324cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac41a4956602086a56bf98a988c5324cc">&#9670;&nbsp;</a></span>purgeUnreferenced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::manager::StorageManager::purgeUnreferenced </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Post initialization step that goes through the map of resources and erases any that are unreferenced. </p>

</div>
</div>
<a id="a18709340c286cf9e7c4e2d9a08897c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18709340c286cf9e7c4e2d9a08897c78">&#9670;&nbsp;</a></span>registerAndAcquireResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt; alexaClientSDK::acsdkAssets::manager::StorageManager::registerAndAcquireResource </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="structalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_1_1_reservation_token.html">StorageManager::ReservationToken</a> &gt;&#160;</td>
          <td class="paramname"><em>reservationToken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sourcePath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers a resource given a path to its content. If the operation succeeds, then it will be acquired as well. If another resource is found with the same id, then this will delete the provided path and use the existing resource. If there is no other resource with this id, then this will move the source path to the resources directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reservationToken</td><td>REQUIRED, a unique token that was used to reserve space ahead of download </td></tr>
    <tr><td class="paramname">id</td><td>REQUIRED, a unique identifier for this resource, preferably the sha2 checksum. </td></tr>
    <tr><td class="paramname">sourcePath</td><td>REQUIRED, the path on disk where this resource is found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULLABLE, a smart pointer to the newly created and acquired resource, null if the operation failed. </dd></dl>

</div>
</div>
<a id="a4f10beec4fe9b627518ebaf865e89108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f10beec4fe9b627518ebaf865e89108">&#9670;&nbsp;</a></span>releaseResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t alexaClientSDK::acsdkAssets::manager::StorageManager::releaseResource </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_resource.html">Resource</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>resource</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a resource, attempt to find it in the list and decrement its reference count. If the reference count is 0, then erase the resource from the system and return the size of how much memory was freed. If there are others referencing this resource, then return 0 and keep the resource on disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>REQUIRED, a valid resource that is registered by storage manager. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the space that was cleared with this release, 0 if the resource was not deleted. </dd></dl>

</div>
</div>
<a id="a4c77f82f3126a9fa2d0bb7c54628a0cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c77f82f3126a9fa2d0bb7c54628a0cd">&#9670;&nbsp;</a></span>requestGarbageCollection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::manager::StorageManager::requestGarbageCollection </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>requestedAmount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Asks the Asset Manager to free up a certain amount of space in a background task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestedAmount</td><td>amount in bytes to be cleared. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a60880e88bf9bc5699cff743925df1f35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60880e88bf9bc5699cff743925df1f35">&#9670;&nbsp;</a></span>requestSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool alexaClientSDK::acsdkAssets::manager::StorageManager::requestSpace </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>requestedAmount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Forwards request to Asset Manager to free up space according to the given amount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestedAmount</td><td>amount in bytes to clear. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the requested space was cleared, false otherwise. </dd></dl>

</div>
</div>
<a id="aa746012ce1f21c7bddcb6fcf76c5592c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa746012ce1f21c7bddcb6fcf76c5592c">&#9670;&nbsp;</a></span>reserveSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unique_ptr&lt; <a class="el" href="structalexa_client_s_d_k_1_1acsdk_assets_1_1manager_1_1_storage_manager_1_1_reservation_token.html">StorageManager::ReservationToken</a> &gt; alexaClientSDK::acsdkAssets::manager::StorageManager::reserveSpace </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>requestedAmount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reserve the requested amount of space and return a token that will be used to track the reserved space and is needed for registering a new resource. If the token is destroyed, the space is automatically freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestedAmount</td><td>space to reserve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new unique token if space is successfully reserved, nullptr otherwise </dd></dl>

</div>
</div>
<a id="ae8422c317c64831548152bb5ba00ead7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8422c317c64831548152bb5ba00ead7">&#9670;&nbsp;</a></span>setBudget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::manager::StorageManager::setBudget </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>valueMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a new budget value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>the new budget in MB. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a257f69bde4873eccf553ef68ff1ac3b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a257f69bde4873eccf553ef68ff1ac3b8">&#9670;&nbsp;</a></span>MAX_BUDGET_MB</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr auto alexaClientSDK::acsdkAssets::manager::StorageManager::MAX_BUDGET_MB = 500</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/workplace/avs-device-sdk/capabilities/AssetManager/acsdkAssetManager/src/<a class="el" href="_storage_manager_8h_source.html">StorageManager.h</a></li>
<li>/workplace/avs-device-sdk/capabilities/AssetManager/acsdkAssetManager/src/<a class="el" href="_storage_manager_8cpp.html">StorageManager.cpp</a></li>
</ul>
</div><!-- contents -->
<html>
  <body>
    <p style="text-align:left;">
      AlexaClientSDK 1.26.0 - Copyright 2016-2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      <span style="float:right;">
	Licensed under the <a HREF=http://aws.amazon.com/apache2.0/>Apache License, Version 2.0</a>
      </span>
    </p>
  </body>
</html>
