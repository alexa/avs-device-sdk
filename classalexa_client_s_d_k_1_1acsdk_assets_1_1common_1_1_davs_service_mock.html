<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AlexaClientSDK: alexaClientSDK::acsdkAssets::common::DavsServiceMock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="avs-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AlexaClientSDK
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">A cross-platform, modular SDK for interacting with the Alexa Voice Service</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacealexa_client_s_d_k.html">alexaClientSDK</a></li><li class="navelem"><a class="el" href="namespacealexa_client_s_d_k_1_1acsdk_assets.html">acsdkAssets</a></li><li class="navelem"><a class="el" href="namespacealexa_client_s_d_k_1_1acsdk_assets_1_1common.html">common</a></li><li class="navelem"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html">DavsServiceMock</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">alexaClientSDK::acsdkAssets::common::DavsServiceMock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_davs_service_mock_8h_source.html">DavsServiceMock.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9ac061471684bf9edd8c8124c187ea28"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> = <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_interfaces_1_1_davs_request.html#a61fa0e2ec67bf5060cf75600fab5c8ff">commonInterfaces::DavsRequest::FilterMap</a></td></tr>
<tr class="separator:a9ac061471684bf9edd8c8124c187ea28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a593fba53813d774192c04f909a86462d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a593fba53813d774192c04f909a86462d">DavsServiceMock</a> ()</td></tr>
<tr class="separator:a593fba53813d774192c04f909a86462d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add11e72726568b3a74ea0d0c46223aec"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#add11e72726568b3a74ea0d0c46223aec">~DavsServiceMock</a> ()</td></tr>
<tr class="separator:add11e72726568b3a74ea0d0c46223aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b3411aeff72396505735a4cb12bb27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#ae5b3411aeff72396505735a4cb12bb27">uploadBinaryArtifact</a> (const std::string &amp;type, const std::string &amp;key, const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;metadata, const std::string &amp;filePath, std::chrono::milliseconds ttlDelta, const std::string &amp;id=&quot;&quot;)</td></tr>
<tr class="separator:ae5b3411aeff72396505735a4cb12bb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887477b253246c2683e2ef96daaee575"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a887477b253246c2683e2ef96daaee575">uploadBase64Artifact</a> (const std::string &amp;type, const std::string &amp;key, const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;metadata, const std::string &amp;encodedBinary, std::chrono::milliseconds ttlDelta, const std::string &amp;id=&quot;&quot;)</td></tr>
<tr class="separator:a887477b253246c2683e2ef96daaee575"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab37361944a3d8f3f22ca862f36dc2508"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#ab37361944a3d8f3f22ca862f36dc2508">getId</a> (const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;map)</td></tr>
<tr class="separator:ab37361944a3d8f3f22ca862f36dc2508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a9ac061471684bf9edd8c8124c187ea28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ac061471684bf9edd8c8124c187ea28">&#9670;&nbsp;</a></span>FilterMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">alexaClientSDK::acsdkAssets::common::DavsServiceMock::FilterMap</a> =  <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_interfaces_1_1_davs_request.html#a61fa0e2ec67bf5060cf75600fab5c8ff">commonInterfaces::DavsRequest::FilterMap</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a593fba53813d774192c04f909a86462d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593fba53813d774192c04f909a86462d">&#9670;&nbsp;</a></span>DavsServiceMock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">alexaClientSDK::acsdkAssets::common::DavsServiceMock::DavsServiceMock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="add11e72726568b3a74ea0d0c46223aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add11e72726568b3a74ea0d0c46223aec">&#9670;&nbsp;</a></span>~DavsServiceMock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">alexaClientSDK::acsdkAssets::common::DavsServiceMock::~DavsServiceMock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab37361944a3d8f3f22ca862f36dc2508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab37361944a3d8f3f22ca862f36dc2508">&#9670;&nbsp;</a></span>getId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string alexaClientSDK::acsdkAssets::common::DavsServiceMock::getId </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a887477b253246c2683e2ef96daaee575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887477b253246c2683e2ef96daaee575">&#9670;&nbsp;</a></span>uploadBase64Artifact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::common::DavsServiceMock::uploadBase64Artifact </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>encodedBinary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>ttlDelta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae5b3411aeff72396505735a4cb12bb27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b3411aeff72396505735a4cb12bb27">&#9670;&nbsp;</a></span>uploadBinaryArtifact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alexaClientSDK::acsdkAssets::common::DavsServiceMock::uploadBinaryArtifact </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#a9ac061471684bf9edd8c8124c187ea28">FilterMap</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>ttlDelta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This mimics the step of uploading artifact to DAVS. See <a href="https://w.amazon.com/bin/view/DeviceArtifactVendingService/DAVS2.0_SOP/#HPUTAPI-Uploadartifact">https://w.amazon.com/bin/view/DeviceArtifactVendingService/DAVS2.0_SOP/#HPUTAPI-Uploadartifact</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the type of artifact such as "wakeword" or "fingerprint" </td></tr>
    <tr><td class="paramname">key</td><td>the key such as "alexa" or "amazon" </td></tr>
    <tr><td class="paramname">filterMap</td><td>ordered map of filters </td></tr>
    <tr><td class="paramname">filePath</td><td>absolute path to a file to upload, such as "/tmp/file.tar.gz" </td></tr>
    <tr><td class="paramname">ttlDelta</td><td>the delta time from current time when artifact expires </td></tr>
    <tr><td class="paramname">id</td><td>OPTIONAL, id of the artifact as it sits in the cloud, if not provided, then a concatination of key+type+metadata is used</td></tr>
  </table>
  </dd>
</dl>
<p>Some analysis of fields expected by actual publishing call and how it affects the flow and if it matters to our mocking: clientArtifactId: DAVS expects that publisher creates the ID; we'll create the ID automatically by using the type_key_locale artifactMD5Checksum: DAVS uses this for validation of the upload; we don't care and we'll not use artifactKey: we'll use 'key' supplied by the consumer of this API; will be returned in response artifactType: we'll use 'type'; will be returned in response uploaderId: ignored description: ignored contentLength: we'll populate automatically and return in response artifactTimeToLive: we'll use supplied delta from current time metadata: given by the consumer of this API</p>
<p>After this method is called, it is expected that CURL request to <a href="https://api.amazonalexa.com/v2/deviceArtifacts/?artifactFilter=">https://api.amazonalexa.com/v2/deviceArtifacts/?artifactFilter=</a>&lt;request&gt; will inspect the &lt;request&gt; part and return a response JSON containing following valid fields: "artifactSize" will be the size of the local file "artifactKey" and "artifactType" will be the same as given here (BTW, client side doesn't care right now but might in future for further validation) "artifactTimeToLive" and "urlExpiryEpoch" will be currentTime + given delta, returned in MS like DAVS does "artifactIdentifier" will be the ID generated by this API and will internally be stored in /tmp/davs_service_mock "downloadUrl" will be something like "https://device-artifacts-v2.s3.amazonaws.com/type-key-ID.tar.gz?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Date=20180919T223612Z&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Expires=3600&amp;X-Amz-Credential=AKIAJTPKJI7A3WTMPCQQ%2F20180919%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Signature=87160eda6c8325e9ce61120974cdf2f81c4b8a3d47c1192f6cf4b7500ed17165"</p>
<p>Once client issues a request to that download URL, it is expected that the content of the original file pointed to by filePath is returned. Once <a class="el" href="classalexa_client_s_d_k_1_1acsdk_assets_1_1common_1_1_davs_service_mock.html#ae5b3411aeff72396505735a4cb12bb27">uploadBinaryArtifact()</a> completes, the file is no longer needed and can be deleted. DAVS will make its own copy. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/workplace/avs-device-sdk/capabilities/DavsClient/acsdkAssetsCommon/test/mocks/include/<a class="el" href="_davs_service_mock_8h_source.html">DavsServiceMock.h</a></li>
<li>/workplace/avs-device-sdk/capabilities/DavsClient/acsdkAssetsCommon/test/mocks/<a class="el" href="_davs_service_mock_8cpp.html">DavsServiceMock.cpp</a></li>
</ul>
</div><!-- contents -->
<html>
  <body>
    <p style="text-align:left;">
      AlexaClientSDK 3.0.0 - Copyright 2016-2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      <span style="float:right;">
	Licensed under the <a HREF=http://aws.amazon.com/apache2.0/>Apache License, Version 2.0</a>
      </span>
    </p>
  </body>
</html>
